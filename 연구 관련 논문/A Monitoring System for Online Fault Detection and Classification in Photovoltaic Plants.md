# **A Monitoring System for Online Fault Detection and Classification in Photovoltaic Plants**

[태양광 발전소의 온라인 고장감지 및 분류 모니터링 시스템 구축방안 연구]

## Abstract

  PV 시스템 효율은 시스템 작동 전반에 걸쳐 심각한 에너지 손실로 이어질 수 있는 여러 가지 결함의 영향을 받는 것 외에 환경 변수에 크게 의존한다. 이러한 의미에서 우리는 즉각적이고 과거적인 데이터를 생산하기 위한 전기 및 환경 변수를 측정하기 위한 모니터링 시스템(MS)을 제시하여 발전소 효율과 관련된 매개변수를 추정할 수 있다. 또한 동일한 MS를 사용하여 시스템의 결함을 감지하는 재귀 선형 모델(recursive linear model)을 제안하고 PV 패널의 방사선도(irradiance) 및 온도(temperature)를 입력 신호로, 전력(power)을 출력으로 사용한다. 테스트에 사용된 5kW 발전소의 고장 감지 정확도는 93.09%이며, 16일 및 다양한 조건에서 약 143시간의 고장을 고려한다. 일단 고장이 모델에서 감지가 되면, ML기반 방법은 고장을 다음과 같은 케이스로 분류한다: short-circuit(단락), open-circuit(단선), partial shadowing(부분 그림자), degradation(성능 저하). 감지 모듈에 적용된 동일한 날과 고장을 사용하여 분류 단계의 정확도는 Artificial Neural Network(ANN)모델의 경우 95.44%이다. detection와 classification를 결합하면 전체 정확도가 92.64%가 된다. 다른 관련 작업에서는 고장 감지 및 classification 접근 방식을 embedded PV plant monitoring system과 통합하지 않기 때문에 이러한 결과는 이 작업의 원래 기여도를 나타낸다. 즉, 발전소의 electrical 및 environmental 파라미터의 실시간 및 과거 모니터링이다.

## Introduction

  재생 에너지원((RE))의 성장은 지난 10년간 점점 더 중요해졌다. 예를 들어 2018년에는 대형 수력 발전소를 고려하지 않고 전 세계적으로 190GW의 신규 설치 총용량을 달성하여 해당 연도 전체 설치 전력용량의 55%에 달했다. 가장 빈번한 재생 에너지원 중 태양광 발전(PV)이 가장 큰 성장세를 보이며 2018년 한 해 동안 설치 용량의 약 39%를 차지하고 있다. 그럼에도 불구하고 PV 성능을 높이려면 몇 가지 성능 문제를 고려해야 한다. 예를 들어, 이 연구에서는 토양 및 온도와 같은 다양한 기상 조건에 대한 높은 노출로 인해 PV 성능이 저하되어 셀 균열(cracked) 및 단락(short-circuits)과 같은 전기적(electrical) 및 기계적(mechanical) 고장이 발생할 수 있다.

  이러한 높은 노출로 인해 성능을 유지하고 매출 손실과 다운타임을 줄이며 PV 시스템의 신속한 장애 감지, 분류, 위치 및 완화를 보장하는 방법이 필요하다. 이를 위한 한 가지 방법은 전기 및 기상 변수를 측정하고, 발전소 운영(예: 원격 액세스)을 관리하고, 오작동 및 오류를 감지하고, 통신 시스템을 통해 로컬 또는 원격으로 그리드 운영자에게 성능과 벤치마킹을 보고하는 PV 플랜트에 MS를 포함하는 것이다. 그러나 모니터링되는 데이터를 사용하여 PV 장애를 감지하고 분류할 수 있는 특정 기술이 필요하기 때문에 MS만으로는 문제를 완전히 해결할 수 없다.

  Techniques는 일반적으로 PV 결함의 detection 및 classification로 나뉜다. 이러한 작업은 주로 open-circuit, short-circuit 및 module mismatch와 같은 가장 반복적인 고장에 초점을 맞춘다. 예를 들어, [12]에서는 위성 데이터를 기반으로 하는 고장 감지가 제안된다. 다른 작업에서는 캐니 에지 검출기(Canny edge detector)와 연결된 열 영상(thermal images)을 사용한 PV 모듈 고장 감지가 제시된다. 최근에는 PV 시스템 모델링을 기반으로 한 몇 가지 방법이 제안되어 실제 PV 발전소에서 최첨단 결과를 달성하고 있다. 그러나 이러한 최신 모델은 대부분 정적 모델을 기반으로 하기 때문에 관련 동적 모델링을 무시하며 짧은 시간 내에 발생하는 이벤트를 감지하기가 어렵다. 

  fault classification 맥락에서는, PV 발전소의 이론 및 시뮬레이션 모델을 사용한 시각적 방법(visual methods), 열 그래픽 이미지 분석 방법(thermographic image analysis methods), 그리고 수학적 방법(mathematical methods)과 같은 다양한 접근법이 있다. 더 최근에 몇몇 ML기반 techniques가 classification performance를 주로 PV 모듈의 shadowing과 depradation부분 등 여러 케이스에서 향상시키도록 제안되었다. 그럼에도 불구하고, 대부분의 방법은 시뮬레이션 데이터에 초점을 맞추고 있으며 저자들은 온라인 결함 분류를 위한 방법에 대한 광범위한 분석을 제시하지 않는다. 

  Detection과 classification methos에 제시된 limitations를 대부분의 모델에는 모니터링 시스템에 통합된 전용 하드워어 또는 시스템의 솔루션 결과가 포함되어 있지 않다는 사실에 추가할 수 있으며, 그러한 경우 PV 발전소 output이 제한되거나 detection이 시스템의 정상 작동을 방해하게 수행될 수 있다. 이러한 의미에서 본 연구의 주요 기여는 embedded PV plant monitoring system과 고장 감지 및 분류 접근법의 통합으로, MS를 발전소에 통합시키는 것 외에도 다양한 PV 결함을 온라인에서 비침해적으로 식별하고 분류할 수 있게 해주는 것이다. 또한, 5kW PV 설비에서 여러 가지 실제 고장 시나리오를 각각 감지 및 분류하기 위한 동적 모델과 기계 학습 접근법의 상세한 비교를 제시하며, 온라인 고장 감지 및 PV 시스템 분류에 가장 적합한 모델을 가리킨다. 우리가 아는 한, 그러한 제안은 아직 관련 문헌에 제시되지 않았다.

  이 논문은 다음과 같이 구성되었다. Section 2에서는 모니터링 시스템, 고장 감지 및 고장 분류와 관련된 작업과 PV 시스템의 고장 관련 논의를 다룬다. Section 3은 제안된 모니터링 시스템을 다룬다. Section 4는 본 연구에서 제안된 탐지 및 분류 방법을 검증하는 데 사용되는 시뮬레이션 및 실제 데이터셋을 보여준다. Section 5와 6은 각각 제안된 탐지 및 분류 방법의 이론 및 방법론적 측면을 제시한다. Section 7은 모니터링 시스템, 감지 및 분류 접근의 결과를 다른 관련 작업과 비교한다. 마지막으로 Section 8은  일반적인 결론을 보고하고 향후 연구 방향을 제시한다.

## Related Works

  이 시퀀스에서는 모니터링 시스템, 고장 감지 및 결함 분류가 제시되어 최근 문헌에서 관찰된 주요 한계를 보여준다. 마지막으로 섹션 2.5에서는 관련 모니터링 시스템, 고장 감지 및 분류 방법과 관련하여 이 작업의 원래 측면이 자세히 설명되어 있다.

### *Faults in PV Systems*

  고장 발생 평가와 그 영향의 중요한 점은 적어도 태양광 발전 시스템의 가장 일반적인 결함의 조사와 세부 사항이다. 이러한 맥락에서, 그러한 결함에 대한 광범위한 연구가 [22]에 제시되어 있으며, 두 가지 범주, 즉 direct current(DC) 측의 alternating current(AC) 측의 결함으로 나뉜다. AC 측의 고장은 시스템의 인버터 또는 전원 그리드 자체의 문제로 인해 발생한다. DC 측의 고장은 더 많고 여기에는 Maximum Power Point Tracking(MPPT) 알고리즘 문제, 바이패스 다이오드 고장, 접지 고장(ground fault), 아크 고장(arc faults), 셀 또는 모듈 불일치(cell or module mismatch)(임시 또는 영구적일 수 있음), 단선( open circuit), 단락( short-circuit) 등이 포함됩니다. 이 작업에서는 모듈 불일치, 단선 및 단락을 포함하여 가장 자주 발생하는 고장을 선택했다.

  Open-circuit 고장은 시스템의 특정 지점에서 연결이 끊겨 전류 순환이 중단될 때 발생한다. 발전 관점에서 이 고장은 단일 모듈 문자열에서 PV 시스템의 연결 해제 위치와 토폴로지에 따라 시스템 전체에 영향을 미칠 수 있기 때문에 가장 큰 영향을 미친다. 

  Cell 또는 modules의 mismatch는 PV 시스템에 다른 셀 또는 모듈과 매우 다른 전기적 특성을 가진 셀 또는 모듈이 있어 기능을 손상시키는 경우 발생한다. Mismatch는 일시적, 영구적 두개의 하위 카테고리로 나뉜다. Temporary mismatch는 일반적으로 먼지나 눈의 퇴적과 건물이나 송전선에 의한 음영 처리와 같은 이벤트로 인해 발생한다. Permanent mismatch는 영향을 받는 셀 및 모듈의 성능 저하 및 손상으로 인해 발생한다. 본 연구에서는 섀도잉 및 성능 저하를 각각 모듈 레벨에서 발생하는 일시적 및 영구적 불일치의 사례로 사용하여 두 가지 사례를 모두 고려한다. 

  short-circuit fault는 시스템을 따라 저임피던스 경로가 나타날 때 발생한다. PV 시스템의 경우, 동일한 모듈의 두 단자, 동일한 문자열의 두 지점, 두 개의 서로 다른 문자열 및 접지가 있는 문자열과 같은 여러 지점에서 이러한 현상이 발생할 수 있다. 본 연구에서는 동일한 문자열의 두 지점 간 발생, 특히 모듈의 음극 단자와 인접 모듈의 양극 단자 간 발생이 고려되며, 이는 일반적으로 에너지 생산 관점에서 단락 고장에 가장 큰 영향을 미칩니다.

  ### *Monitoring Systems*

  이 연구의 주요 초점인 grid-connected PV system에서, 고장을 감지 및 분류 하기 위해 흔히 측정되는 변수는 총 조사 강도(total irradiance), 풍속(wind speed;), 풍향(wind direction), 각 PV 어레이의 출력 전압 및 전류(output voltage and current), 각 PV 어레이의 출력 전력 및 에너지(output power and energy), 주변 온도(ambient temperature), PV 모듈 온도(PV module temperature), 그리드 전압( grid voltage), 양방향 그리드 전류(bidirectional current of the grid), 양방향 전력(bidirectional power), 그리드의 에너지(energy of the grid) 이다. 발전소 구성 요소 (모듈, 연결 라인, 변환기, 인버터)에서의 결함 식별 외에도, 이러한 변수들은 [25]에서 제시된 바와 같이, 실시간으로 발전소 성능을 평가하고 시스템 신뢰성을 개선할 수 있는 기초가 된다.

  이러한 관점에서 이러한 변수를 측정하기 위해 데이터 수집 시스템을 제시하는 여러 작업이 제안되었다. 예를 들어, [7]에서, 데이터 수집은 발전소 주변에 분포되어 있는 무선 센서로 구성되어 있으며, 이는 전기 및 기상 매개변수를 측정한다. 저자는 400kW 변환 센터의 시스템 성능을 분석하여 다양한 작동 조건에서 센서 네트워크의 결과를 제시한다. 그러나, 저자들에 의해 제시된 주요 기여는 모든 데이터를 동기화하는 고정밀 프로토콜이기 때문에 결함 감지와 분류는 이 연구에서 논의되지 않는다. 

  그럼에도 불구하고, 무선 센서 네트워크 (WSN)의 맥락에서, 그리드 연결 유틸리티 규모 PV 시스템의 지그비 기반 온라인 MS가 [27]에서 제안되었다. 그 시스템은 PV 온도, 조사 및 전력 출력을 측정한다. 또한, 저자들은 [28]에서 제안한 솔루션과 유사한 웹 애플리케이션을 제시하여 실시간으로 결함 감지와 위치를 제공한다. 그럼에도 불구하고 이러한 작업의 공통적인 한계는 분산 센서의 올바른 작동에 대한 높은 의존도이다. 하나 이상의 센서가 고장 나면 공장 전체의 고장 식별 및 위치가 손상된다. 

  PV 공장의 대규모 모니터링을 위한 저비용 센서 네트워크를 제공하고 개별 센서에 대한 높은 의존도를 피하기 위해 다양한 접근 방식이 제안되었다. 예를 들어 [6]에서는 단일 PV 패널에서 일시적/영구적 음영 처리, 더티링 및 비정상적인 노화 등과 같은 중요한 결함을 감지하는 맥락에서 저비용 전압, 전류 및 온도 센서 세트를 적용했다. 그러나 단락 및 기타 유형의 고장은 해당 작업에서 논의되지 않았다. 또한 제안된 센서 네트워크는 단일 PV 패널에 설치되었으며 PV 공장으로 확장되지 않았다. 

  유사하게, 저비용 센서의 개발은 전기 및 온도 변수 모니터링을 위한 최저의 비용을 얻기 위해 [29,30]에서 제안되었다. 다른 데이터 전송 방법을 따르지만, [31]에서 저비용 전략을 유지한 후, DC 전력 라인의 송전선 통신 (PLC) 기술을 사용하여 PV 패널의 전압, 전류 및 온도를 측정하여 중앙 제어 시스템으로 전송하였다. 이와 유사하게, [32]에서는 적시에 수리 및 유지보수를 위해 태양 전지판의 정보를 얻기 위해 WSN으로 구성된 시스템이 제시되며, 특히 국내 애플리케이션에 대해 설계되었다. 그럼에도 불구하고, 이러한 작업은 주로 저비용 모니터링 시스템에 초점을 맞추고 있기 때문에, PV 발전소의 고장 및 오작동 분석, 즉 발전소 유지관리 측면에서 모니터링 변수의 사용은 제공하지 않는다. 

###  *Fault Detection*

  일반적으로 PV 시스템의 장애 감지는 모델링 결과를 실제 수집된 데이터와 비교하기 위해 시스템의 모델링을 기반으로 합니다. 모델링 데이터와 수집된 데이터 간의 차이가 미리 정의된 임계값을 초과할 때마다 장애 이벤트를 나타냅니다. 모델링 단계는 일반적으로 동적 단계와 정적 단계로 나뉜다. 정적 모델은 시간을 독립 변수로 간주하지 않으므로 일반적으로 non-memory model이라고 한다. 반면에 동적 모델은 모델의 시간 변동을 고려한다. PV 모델링에서, 정적 모델은 가장 많이 반복되며, PV 셀은 단일 다이오드 모델로 표현된다.

  [5,34,35]에서, 단일 다이오드 모델을 기반으로 한 정적 모델을 모델링 프로세스에서 결함을 감지하고 에너지 생산을 예측하기 위해 고려한다. 그러나, 이 모델 그룹의 주요 제한사항은 일반 및 정적 PV 셀의 표현이다.PV 셀을 일반적이고 정적인 셀로 단순화함으로써, 개별 특성과 다양한 PV 시스템의 역학을 무시하여 특정 현상의 모델링을 저해하고 결과적으로 짧은 시간 내에 발생하는 결함의 식별을 저해할 수 있다. 그럼에도 불구하고 진단 관점에서 정적 모델은 이러한 결함의 장기적인 특성으로 인해 노화 및 열화 문제를 감지하는 데 적합하다.

  [14,15]에서는, 단일 다이오드 모델의 한계를 개선하기 위해 고장 감지를 위해 다변량 지수 가중 이동 평균 차트에 기초한 통계적 접근법을 제안한다. 저자들은 온도와 방사선 조도를 입력값으로 고려하여 DC 전류, 전압 및 전력의 어레이 residuals를 생성했다. residuals를 사용하면 측정치와 단일 다이오드 모델의 전기 변수에 대한 예측값 사이의 차이를 계산하여 이를 고장 감지기로 사용할 수 있다. 실제 수집된 데이터는 부분 음영 처리, 단선, 단락 및 열화를 감지할 수 있는 제안된 방법의 능력을 보여주지만, 저자들은 일곱 가지 사례 연구만 제시하며, 이는 다른 고장 시나리오에 대한 모델의 일반화를 보여주지 않는다. 또한, 모델은 의사결정 트리 분류기에 기반하기 때문에, 제시된 9.6 kWp PV 발전소로 제한된다. 

  동적 모델링 측면에서 대부분의 모델은 에너지 예측 전용이며 고장 감지 결과를 제공하지 않는다. 예를 들어 [16]에서, 블랙박스 모델링은 온도와 방사선 조도를 입력 신호로 사용하여 시스템에 대한 경험적 모델을 얻기 위해 사용된다. 그러나 그 연구는 가능한 시스템 비선형성을 배제하여 모델을 단순화하므로 장애 감지 측면에서 사용하기 어렵다. 반면에, [36]에서 Hammerstein–Wiener model은 nonlinearities를 포함한 시스템을 에뮬레이션하는 데 사용된다. 방사선 조도와 DC 전력이 각각 입력 및 출력 신호로 사용되었다. 선택된 샘플링 시간은 15분이었으며, 부분 섀도잉과 같은 단기 이벤트를 감지하지 못했다. [37]에서, ARMAX 모델이 PV 시스템의 발전 전력을 하루 전에 예측하기 위해 제안됩니다. ARMAX 모델의 입력 신호는 일일 평균 온도, 강수량, 절연 지속 시간 및 습도이다. 그러나, 저자들은 제안된 모델과 결함 감지에 대해 논의하지 않았다. 또한 논의된 탐지 방법 중 모니터링 시스템에 통합된 전용 하드웨어 또는 시스템에서 솔루션 결과를 제시하지 않은 것도 주목할 만하다.

###  *Fault Classification*

  최근 문헌[9]에서 점점 더 많은 관심과 인기를 얻고 있는 결함 분류를 수행하는 한 가지 방법은 인공지능 모델, 특히 기계 학습 분류기를 사용하는 것인데, 이 역시 본 연구에서 제안된 주요 접근 방식이다. 예를 들어, [10]에서는, 네 가지 가능한 상태 (normal, degradation, short-circuit, shadowing)에서 태양광 시스템의 작동을 분류하기 위한 인공 신경 네트워크의 사용이 제시된다. 이 방법은 시뮬레이션 환경에서 훈련 및 테스트되었으며 평가된 9개의 테스트 샘플을 고려할 때 약 88.89%의 정확도를 얻었다. 실제 고장 사례는 해당 작업에서 보고되지 않았다.

  [38]에서는 고장 감지를 위한 첫 번째 시스템이자 분류를 위한 두 번째 시스템인 2단계 시스템이 논의된다. 저자는 바이패스 다이오드를 포함하거나 포함하지 않는 개방, 열화, 단락 및 섀도잉 사례를 고려한다. 결함 감지의 경우, 제안된 방법은 PV 발전소의 전력과 해당 수학적 모델의 비교를 기반으로 한다. 지정된 임계값을 초과하는 차이가 확인되면 시스템이 고장 감지를 보고한다. 결함 분류의 경우 MLP 인공 신경 네트워크가 사용되어 전체 정확도 90.3%에 도달한다(탐지 및 분류). 또한 이 시스템은 시뮬레이션된 데이터만 사용하여 네트워크를 교육하고 시스템의 VxI 곡선에 기반한 실제 플랜트로 테스트한다. VxI 곡선이 생성될 경우 제안된 장비를 연결하고 감지 및 분류를 수행하기 위해 발전소의 연결을 끊어야 하기 때문에 결함을 실시간으로 분류하는 것은 불가능하다. 유사한 아이디어에 따라, 탐지 및 분류 시스템이 [20]에 제시되어 94.1%의 정확도를 얻는다. 그러나, 저자들은 또한 시뮬레이션 환경에서만 테스트를 제시하였다.

  [39,40]의 보다 최근의 접근 방식에서, 또 다른 2단계 아키텍처가 사용되었지만, 이번에는 다른 환경 조건 하에서 발생한 전력을 추정하기 위해 비선형 자동 회귀 모델 (NARX)이 개발되었다. 다음으로, 퍼지 추론 모델은 시스템을 음영 처리, 단락 및 단선의 조합을 포함하는 고장 구성 집합 중 하나로 분류하기 위해 16개의 사용 사례를 사용하여 추정 값을 감지된 전력과 비교하였다.

  여전히, 두 단계에서의 지능형 방법의 맥락에서, [41,42], 정상, 단선, 그리고 다른 유형의 단락을 감지하기 위한 시스템이 제안되었다. 앞서 언급한 연구의 2단계 접근법은 확률론적 신경 네트워크를 사용하여 참조된 결함의 감지 및 분류를 수행한다. [41]에서, 제안된 시스템을 검증하기 위해 두 번의 시뮬레이션 테스트를 실시하여 각각 82.34%와 98.19%의 검출 및 분류 정확도를 달성하였으며, [42]는 훈련 및 검증에 실제 데이터를 사용하면서 100% 정확도를 달성하였다. 

  보다 전문적인 접근 방식은 여러 상황에서 라인 대 라인 결함을 감지하는 방법을 사용한다. 예를 들어, [43]은 시뮬레이션 데이터로 훈련되고 단락 상태를 감지하기 위해 최대 94.74%의 정확도를 달성하는 실제 PV 공장에서 테스트된 SVM을 사용하는 반면, [44]는 irradiance와 power를 인풋으로 사용하는 Radial Basis Function Neural Network를 사용하여 PV 시스템의 하나 또는 모듈 disconnections을 감지한다. 이 시스템은 두 개의 발전소에서 시험했을 때 98.1%, 97.9%, 96.5%의 정확도를 달성하였으며, 정상 운전, 음영 및 흐림 조건 하에서 각각 2.2 kW 및 4.16 kW로 시험하였다. 또 다른 방사형 베이스 함수 네트워크는 [45]에서 1 kW 태양광 발전소를 14개의 사례 중 하나로 분류하기 위해 사용되었다. 여기에는 정상, 단락, 셀 우회, 음영, 접지 결함, 그리고 9개의 컨버터/인버터의 구성요소 결함이 포함되었다. 이 시스템은 시뮬레이션에서만 테스트되었으며 97%의 테스트 정확도를 달성했다.

 반면 [11]에는 개방, 섀도잉, 단락 및 열화 사례에서 PV 결함을 분류하기 위해 커널 익스트림 학습 머신과 VxI 곡선의 데이터를 사용하는 방법이 나와 있다. 시스템의 성능을 평가하기 위해 세 가지 사례 연구가 수행되었습니다. 첫 번째는 훈련 및 테스트에 시뮬레이션 데이터만 사용하는 반면, 두 번째는 1.8kW 피크 PV 설비에서 획득한 실제 데이터만 사용합니다. 세 번째 접근 방식은 실제 공장에서 수집되는 데이터의 양이 제한적이기 때문에 교육에 시뮬레이션 데이터를 사용하고 테스트에 실제 데이터를 사용한다. 시뮬레이션 데이터만 사용하는 경우, 제안된 시스템은 100.0%의 정확도에 도달했다. 실제 데이터의 경우 정확도는 97.9%에서 99.0% 사이였으며, 세 번째 경우에는 혼합 데이터의 경우 98.9%였다. 상대적으로 높은 성능(>95.0%)에도 불구하고 방법이 VxI 곡선을 기반으로 하기 때문에 제안된 결함 분류 절차를 수행하기 위해 PV 시스템의 연결을 끊어야 합니다. VxI 곡선을 얻기 위해 발전소에 연결되어야 하는 외부 장치를 사용합니다. 또한 저자들은 솔루션 결과를 전용 하드웨어 또는 시스템에 제시하지 않았다.

### *Contributions of This Work*

  지금까지의 노출을 바탕으로, 결함 감지 및 분류가 지금까지 매우 흥미로운 기여를 한 주요 주제임을 관찰할 수 있다. 본 연구는 PV 시스템 모니터링, 결함 감지 및 분류와 관련하여 다양한 기여도를 제시하는 현재 문헌을 보완한다. 모니터링 시스템 측면에서 관련 작업에 따르면 발전소 변수의 모니터링이 보다 포괄적일 경우 일반적으로 결함 분석은 없다. 반면에 모니터링 시스템에 고장 감지가 포함(포함)되면 감지된 고장이 특정 유형의 고장으로 제한됩니다. 둘 다 있는 경우 작업은 시뮬레이션 또는 저전력 PV 구축만 사용하여 평가됩니다. 이와 함께, 본 연구의 첫 번째 기여는 고장 감지 및 분류 접근 방식과 산업 등급 내장형 태양광 발전소 모니터링 시스템의 통합으로, 발전소에 통합된 MS를 제공하는 것 외에도 다양한 PV 결함을 온라인으로 식별하고 분류할 수 있게 하는 것이다. 

  고장 감지와 관련하여, 여러 고장 시나리오에 대한 동적 모델의 사용 및 매우 상세한 비교는 문헌에서 여전히 제한적이며, 특히 실제 수집된 데이터의 경우 이 연구의 추가적인 기여로 강조될 수 있다. 마지막으로, 분류 관점에서, 실제 고장 시나리오에서 여러 실제 수집된 데이터를 사용한 테스트 외에도, 다른 고장 조건을 가진 기계 학습 모델을 훈련시키기 위한 시뮬레이션 (및 검증된) 데이터의 사용은 문헌에서 간략히 평가되며 관련 기여로 강조될 수 있다. 또한, PV 시스템의 온라인 결함 분류에 가장 적합한 모델을 가리키며 가장 일반적인 기계 학습 방법 중 몇 가지에 대한 상세한 비교도 제시한다.

  우리 작업과 관련된 또 다른 기여는 시뮬레이터와 교육 데이터 세트를 공개적으로 제공하여 새로 제안된 기술과의 직접적인 비교를 가능하게 한다는 점이다. 

  마지막으로, 본 연구는 모니터링 시스템, 결함 감지, 분류의 초기 및 개별 결과를 각각 제시한 본 논문의 저자들의 이전 저작[8,17,21]의 확장 및 조합임을 언급할 가치가 있다.

## **Proposed Monitoring System**

각각 N 직렬로 연결된 태양광 모듈 PV{1, ...,N}(으)로 구성된 문자열 그룹 **S**로 구성된 태양광 시스템을 가정해 보자. 임의의 string s(*s* ∈ **S**)가 Irradiance(*G*)의 대상이 되면, 전압 V\_{dc,s}와 전류 I\_{dc,s} (결과적으로 output power P\_{dc,s} = V\_{dc,s}I_{dc,s} ) 가 생성되는데, 이는 변함없는 PV_j ∀ j를 고려하고 임의의 온도 T에 의존한다. 인버터가 언급된 S 문자열 그룹의 에너지 출력을 전압은 Vac이고 전류는 Iac인 two-phase ac waveform으로 변환하도록 배치된다. 변환된 전력이 유틸리티 그리드에 주입된다. 데이터 수집 시스템은 최소 샘플링 주파수가 1Hz인 위에서 언급한 모든 변수를 수집할 수 있다. 출력은 다음과 같은 시스템 고장의 영향을 받을 수 있다 : (i) 임의의 수의 인접 PV\_{j, ...,k} 모듈 간에 short circuit, (ii) 모듈 string  ∈ S의 open circuit, (iii) 인접한 PV*j*,*k* 모듈 쌍 간의 높은 resistance connection, (iv) 부분 섀도우로 인한 모듈 output mismatch. 우리는 수집된 데이터를 사용하여 고려 대상 시스템이 제안된 고장 중 하나에서 작동 중인지 여부를 감지하는 고장 감지 시스템을 제안한다. 결함이 감지되면 해당 알고리즘에 의해 결함 분류가 수행되고 그 결과가 사용자에게 통지된다. 

<img src="/Users/sua/Library/Application Support/typora-user-images/Screen Shot 2021-07-05 at 4.26.32 PM.png" alt="Screen Shot 2021-07-05 at 4.26.32 PM" style="zoom:50%;" />

<img src="/Users/sua/Library/Application Support/typora-user-images/Screen Shot 2021-07-05 at 4.26.48 PM.png" alt="Screen Shot 2021-07-05 at 4.26.48 PM" style="zoom:50%;" />

  Figure 1은 Figure 2에 나타낸 것과 같이 신호 수집 모듈이 장착된 National Instruments CompactRIO(cRIO) 컨트롤러에 의해 수집 시스템이 구현되는 제안 시스템을 나타낸다. cRIO 컨트롤러는 Linux 실시간 운영 체제를 실행하며 산업용 임베디드 고속 제어 및 신호 처리 시스템을 위해 LabVIEW 환경에서 프로그래밍된 FPGA 및 모듈형 I/O를 갖추고 있다.

  수집된 신호와 분석 사이에, 개발된 소프트웨어가 샘플링을 s∈**S** 인 25kHz V\_{dc,s}, I\_{dc,s}, Vac, Iac 로 조정하는 실행 환경을 구성하는 소프트웨어 스택이 있다.  다음으로, 모니터링된 변수 RMS(root mean square) 값이 매 초마다 계산되어 local database에 저장되는 신호 v_dc,s(k), i_dc,s(k), v_ac(k), i_ac(k) (with s∈**S**)를 생성한다. 또한 모니터링되는 신호에서 RMS 신호가 계산된다 : String power output p_dc,s(k) = v_dc,s(k) i_dc,s(k) 와 inverter power output p_ac(k) = v_ac(k) i_ac(k). 스택 맨 위에는 장애 감지 및 분류 알고리즘이 구현된다. 다음 하위 섹션에는 그림 1의 블록이 나와 있다.

### *PV Power Plant*

  이 연구에서, , PV{1, ... ,*N*}은 N=16, Canadian 330W Poly-crystaline Modules (CS6U-330P)을 사용하여 각각 8개 모듈의  |**S**| = 2 strings인 그룹 **S** 를 형성한다. 표 1은 모듈의 주요 전기 데이터를 보여준다.

<img src="/Users/sua/Library/Application Support/typora-user-images/Screen Shot 2021-07-05 at 4.39.46 PM.png" alt="Screen Shot 2021-07-05 at 4.39.46 PM" style="zoom:50%;" />

 <img src="/Users/sua/Library/Application Support/typora-user-images/Screen Shot 2021-07-05 at 4.40.30 PM.png" alt="Screen Shot 2021-07-05 at 4.40.30 PM" style="zoom:50%;" /> 

그림 3에서, 제안된 시스템의 배치 현장 (모듈과 센서)을 보여준다. 이 시스템은 총 5 kW의 최대 설치 용량을 산출할 수 있다.

  그리드에 연결된, NHS에 의해 생산된 파워 인버터는 (그림 2 참조) 스트링 1과 2에서 나오는 DC 입력 에너지를 단상 AC 출력으로 변환하는 역할을 한다. 이 인버터는 최대 에너지 변환을 위해 MPPT( Maximum Power Point Tracking) 알고리즘을 실행할 뿐만 아니라 s∈**S** 인 V\_{dc, s}, I\_{dc,s}, Vac 및 Iac을 측정하고 RS-485 인터페이스를 통해 RMS 값을 수집 시스템에 보고할 수도 있다. 이 보고는 외부 센서 고장을 감지하는 데 사용될 수 있다.

  태양광 생산은 태양 전지판이 작동하는 순간적인 환경 조건에 크게 의존하기 때문에, 획득 시스템은 순간적인 전력 생산량과 기상 변수를 연관시키는 것이 중요하다. 이러한 이유로, PV production에서 주요한 영향을 미치는 변수를 모니터링하기 위해 weather station이 cRIO에 연결된다: (i) irradiance G[W/m^2] , (ii) 모듈 온도 T[ºC],  추가적으로 우리 시스템은 주요 변수에 영향을 줄 수 있는 부수적인 변수도 측정한다 : (iii) 주변 온도: T_a[ºC]; (iv) 상대 습도 H[%] ; (v) dew point(이슬점)[ºC] (vi) wind speed W_s[m/s] (vii) wind direction W_d[degrees]. 그림 3에서, weather station은 PV 모듈 및 센서 근처에서 관찰될 수 있다. 

  irradiance (*G*) 측정을 위해, EKO MS-40 클래스 B pyranometer(일사계)가 동일한 패널 설치 기울기를 따라 PV1 근처에 설치되었다. 이것은 global irradiance(285 to 3000 nm 스펙트럼 감도)를 180º 각도로 측정할 수 있게 한다. PV{1,...,N}의 패널 온도는 PV 1,6,11,16 뒤에 설치된 4개의 PT100 contact sensors, Kimo Instruments SFCSD-51-A-3-PVC-25에 의해 측정된다: T는 얻어진 측정치의 산술 평균으로 간주된다. 이러한 센서들의 온도 0 ~ 100ºC 사이의 Output 정확도는 +-0.15 ºC이다.  environmental signal은 Novus Fieldlogger datalogger로부터 얻어진다. cRIO에 대한 연결은 이더넷을 통해 Modbus TCP/IP 버스를 통해 구현된다. 

### *Electrical Variables*

<img src="/Users/sua/Library/Application Support/typora-user-images/Screen Shot 2021-07-05 at 5.08.44 PM.png" alt="Screen Shot 2021-07-05 at 5.08.44 PM" style="zoom:50%;" />

  Figure 4는 전기 변수 수집 방식에 대한 자세한 보기를 보여준다. 여기서 모니터링되는 신호의 정확한 수집 지점이 두 PV 문자열(Vdc, s, IDc, s, s)의 DC 전압 및 전류 출력과 파워 인버터 출력의 AC 전압(Vac, Iac)에 대해 표시되며, Utility Grid 중성선에 대해 인버터의 두 와이어를 모두 측정하여 얻습니다(s는 표시되지 않음).단순성 이유) (Vac,1, Iac,1, Vac,2, Iac,2).

### *Execution Environment and Developed Software*

  일반적으로 MS는 환경 변수를 읽고, 전기 신호를 수집, 교정 및 집계하고, 데이터를 타임스탬프하고, 장애 감지 및 결함 분류를 구현할 수 있는 데이터베이스 기반 실행 환경을 제공한다.

<img src="/Users/sua/Library/Application Support/typora-user-images/Screen Shot 2021-07-05 at 5.19.55 PM.png" alt="Screen Shot 2021-07-05 at 5.19.55 PM" style="zoom:50%;" />

  그림 5는 하위 레벨 하드웨어 모듈을 포함한 소프트웨어 스택으로, 이전 섹션에서 이미 설명한 대로 실제 환경에 대한 인터페이스를 구현한다. Acquisition Control module은 판독에서 저장까지의 주기적 프로세스를 조정한다. FPGA에서 실행되는 LabVIEW 합성 프로그램 가능 논리는 25kHz에서 샘플링된 신호의 실시간 실행 및 동기화를 보장한다. 파워 인버터와의 RS485 Modbus 통신 및 기상 관측소와의 이더넷 연결은 LabVIEW 환경에서 서브 Virtual Instruments(기능)로 구현되어 1초 간격으로 실행된다. 데이터 분석 모듈은 데이터베이스에 저장하기 전에 이더넷 연결을 통해 타임스탬프를 사용하여 교정 및 집계 값 계산을 담당한다. 데이터 분석 모듈에 구현된 또 다른 기능은 HMI(Human Machine Interface)를 업데이트하기 위한 보간, 타임스탬프 신호 및 집계 값의 소멸, 비교로 사용자가 구성할 수 있는 경보에 대한 이벤트를 생성하는 것이다. TCP-IP 원격 프로시저 호출을 통해 Python에서 소프트웨어로 실행된다. 이 체계를 사용하면 상위 레벨 애플리케이션이 분산 시스템의 다른 네트워크 노드뿐만 아니라 crio에서도 로컬로 실행될 수 있다.

  Ubuntu를 실행하는 데이터베이스 서버에 대한 논리적 연결은 cRIO의 Linux 환경에 직접 설치된 Maria DB 클라이언트를 통해 수행되며 LabVIEW 및 Python의 셸 스크립트를 통해 활성화된다. 로컬 네트워크의 데이터베이스 서버를 여러 발전소 관리를 위한 확장 가능한 솔루션으로 클라우드로 확장할 수 있다.

  소프트웨어 스택의 맨 위에는 LabVIEW를 통해 실행되는 장애 감지 모듈과 Python에서 실행되는 장애 분류 모듈이 있다. 분류 모듈은 Sckit Learn 기계 학습 라이브러리를 미들웨어로 사용한다.

 마지막으로, LabVIEW에 구현된 HMI Handling 모듈은 cRIO USB 및 Display Port 연결에 직접 연결된 터치 스크린 디스플레이에 표시되는 시스템 그래픽 사용자 인터페이스를 조정한다. 이 HMI를 사용하면 실시간 데이터를 시각화하고 구성 가능한 시간대에 대한 그래픽 분석을 생성할 수 있으며 시스템에서 표시할 경보 조건을 설정할 수 있다. 

## Datasets

  제안된 고장 감지 및 분류 시스템은 시스템 식별 및 기계 학습 기술을 기반으로 하며, 이를 위해서는 교육용, 특히 기계 학습 모델의 경우 과거 운영 데이터의 대규모 데이터 세트가 필요할 수 있다. 다양한 상황에서 이러한 알고리즘의 정확성은 이 교육 데이터 세트의 다양성에 따라 달라지며, 이 데이터 세트에는 전체 환경 조건에 대해 고려되는 모든 결함에서 운영 데이터가 포함되어야 한다. 대부분의 PV 설비에서는 이러한 모든 환경 조합이 자연적으로 발생할 때까지 기다리는 것이 불가능하기 때문에 단기간에 필요한 데이터셋을 생성할 수 있는 PV 공장 시뮬레이터를 만들었다. 반면에 생성된 모델은 실제 시스템 동작을 정확하게 설명해야 한다. 이러한 방식으로, 우리는 시뮬레이터 설정을 검증하기 위해 실제 태양광 발전 설비 (섹션 3.1)를 사용한다. NAT의 교육 및 검증 데이터 세트를 생성하는 데 사용되는 이 하이브리드 접근 방식은 다음 섹션에 설명되어 있다. 첫째, 실제 설치에서 운영상의 결함을 인위적으로 도입하는 방법에 대해 설명한다. 순서에 따라, 실제 설치 동작과 일치하는 제안된 electrical simulator가 제시된다.

  ###  *Real System Installation*

<img src="/Users/sua/Library/Application Support/typora-user-images/Screen Shot 2021-07-05 at 5.30.14 PM.png" alt="Screen Shot 2021-07-05 at 5.30.14 PM" style="zoom:50%;" />

  그림 6은 그림 3의 설치된 PV 발전소의 전기 다이어그램을 상세히 보여준다. 여기에서 16개의 태양광 모듈 (PV{1, ...,16})은 두 개의 8개 모듈 태양광 문자열로 구성된 그룹 S에 배열되어 있다. String 출력은 5kW 그리드 타이 인버터(SI1)에 연결된다. 같은 설비에서도 전기 패널에는 태양광 설비에 흔히 사용되는 보조 구성 요소가 들어 있다: 퓨즈 및 과도 전압 억제기(회로 보호 블록), 문자열 회로 차단기(DS{1,2}) 및 주 회로 차단기(DM1)가 있다. 또한 시스템 고장을 발생시키기 위해 일부 구성 요소가 설치된다: 12개의 소켓 T{1,...,12}를 연결하여 다양한 short-circuit 조건을 생성하거나, 보조 회로 차단기 D{1,...,8}와 함께 사용하여 String과 직렬로 임의 저항을 삽입하여 degradation faults를 생성할 수 있다. 동일한 회로 차단기(D{1, ...,8})를 개별적으로 사용하여 open-circuit 고장을 생성할 수도 있다. 마지막으로, 다양한 불투명 물체를 사용하여 물리적으로 태양 복사를 차단함으로써 음영이 발생할 수 있다.

  완전히 맑은 날부터 실제 데이터 세트를 생성합니다. 흐리고 비가 오는 날은 고려되지 않습니다. 자연 섀도잉이 수집된 파라미터에 영향을 미치지 않는다고 보장할 수 있는 방법이 없기 때문이다. 다음으로, 표 2에 제시된 고장 일람표가 시스템에 생성된다.

<img src="/Users/sua/Library/Application Support/typora-user-images/Screen Shot 2021-07-05 at 5.39.00 PM.png" alt="Screen Shot 2021-07-05 at 5.39.00 PM" style="zoom:50%;" />

  배치 장소의 특성으로 인해 자연스레 부분 음영이 발생한다: 햇빛은 아침과 점심 (약 2시간 간격)으로 다른 순간에 빌딩에 의해 막힐 수 있다. 프로세스는 16일동안 반복되는데, 고장과 정상 상태를 포함한 데이터가 모아지고 적절하게 07:30에서 17:00까지 라벨링 된다. (샘플링 비율이 1Hz일 때 성능 저하가 있는 10,371 포인트, 단락이 있는 5999 포인트, 단선이 있는 6024 포인트, 부분 섀도우가 있는 184,311 포인트, 결함이 발생하지 않은 309,253 포인트가 생성된다.) 이 실제 데이터 집합은 장애 감지 및 분류 방법에 관한 다른 실험을 용이하게 하기 위해 공개된다. (https://github.com/clayton-h-costa/pv_fault_dataset).

### *System Simulation*

  PV 시뮬레이터가 개발되었을 때 고려해야 할 주요 관심사는 PV 발전소에서 사용되는 다양한 상용 구성 요소를 나타낼 수 있는 능력이다. 검증을 위해 Dataset 생성을 위해 선택된 파라미터는 섹션 3에 설명된 사용 가능한 시스템의 파라미터와 일치하다.

  시뮬레이터의 전기 회로는 PSIM(Power System Simulation software)에서 실행되고, environmental variables는 Simulink/Matlab script에 의해 컨트롤된다. 구현된 시뮬레이션 블록은 그림 7에서 관찰될 수 있습니다. 여기에서 S{1,2}는 각각 330W의 8개의 PV 모듈로 구성된 PV 스트링을 모델링합니다. PV 스트링은 셀의 방사선과 온도를 입력으로 취하는 단일 다이오드 모델 [33]을 사용하여 개별적으로 시뮬레이션됩니다.

![Screen Shot 2021-07-05 at 6.04.14 PM](/Users/sua/Library/Application Support/typora-user-images/Screen Shot 2021-07-05 at 6.04.14 PM.png)

모델의 매개변수는 [21]에서 자세히 설명한 대로 표 1의 PV 패널 사양과 일치하도록 선택되었습니다. 다음으로, G는 시뮬레이션된 시스템 irradiance를 나타내며, T는 시뮬레이션된 모듈 온도를 나타냅니다.

  각각의 Ss module은 시뮬레이션된 V\_{dc,s}, I\_{dc,s}를 아웃풋하는데, 이것들은 고정 전압 출력 부스트 컨버터(Bs)로 인풋되고, 이 컨버터는 MPPT algorithm을 주시한다.(*s* ∈ {1, 2}) 마지막으로, 조절된 출력은 DC 버스를 시뮬레이션된 유틸리티 그리드에 연결된 127V, 60Hz의 단상 출력으로 변환하는 풀 브리지 인버터(J1)로 공급된다.

  또한 다음과 같은 시스템 고장을 시뮬레이션하기 위해 일부 보조 요소가 도입되었다: short-circuit 결함을 모델링하는 스위치, 문자열 저하를 모델링하는 저항기, 부분 섀도우를 모델링하는 변수, 단락 결함을 모델링하는 스위치이다. 이러한 요소의 세부 사항은 [21]에서도 관찰할 수 있다.

전체 온도 및 irradiance 범위에 대한 5가지 운영 조건 각각을 대상으로 시뮬레이션을 사용하여 교육 데이터 세트를 생성했다. 온도 하한은 -5ºC로 설정되었으며 이는 설치 장소(쿠리티바-브라질)의 과거 최소값과 호환되며 상한은 PV 모듈의 최대 작동 온도인 +85C로 설정되었다. 방사 조도 범위는 100 W/m2 ~ 1000 W/m2로 설정되었으며, 이는 실제 인버터가 작동하기 시작하는 지점과 피크 발생 전력 사이의 범위를 나타낸다. 온도 범위는 각각 5ºC로 19단계에 걸쳐 시뮬레이션되었고 방사선 조도는 검토된 4개의 단층 각각에 대해 50 W/m2의 19단계로 시뮬레이션되었다. shadowing fault의 경우, 4개의 다른 경우를 시뮬레이션했으며, 각각은 5%에서 15%까지 다양한 음영 크기를 가지며, 이는 PV 발전소에서 관찰되는 일반적인 음영이다. 이 설정으로 문자열당 361개의 샘플 케이스가 생성되었으며, 총 5054개의 샘플이 생성되었다.

  ## Fault Detection

  본 섹션에서 표현된 바와 같이, 고장 감지 기술은 태양광 시스템 역학을 모델링하는 것을 기반으로 하며, 시스템의 적절한 작동 측정 지표로서 실제 시스템과 모델 사이의 일치를 사용한다. 이러한 맥락에서 다음과 같은 두 가지 개념을 명확히 하는 것이 중요하다 (i) system : 상호 영향을 받는 entities의 제한된 배치로 정의 (ii) model : 이러한 시스템의 수학적 표현으로 정의. 다음 섹션에서는 PV 모델링 프로세스에 대해 자세히 알아볼것이다.

###  *System Identification Model*

  실제 시스템에 대한 적절한 모델을 달성하기 위해 사용된 방법론은 시스템 식별에 기초하였다. 이러한 맥락에서 시스템 식별은 시스템의 관찰된 입력 및 출력을 처리하여 시스템의 수학적 설명을 측정하는 방법으로 정의할 수 있다. 일반적으로 이 기술을 통해 달성되는 모델은 물리적 법칙에 근거한 모델보다 시스템을 설명하는 것이 더 정확하다. 본 작업의 시나리오에서는 특정 시스템의 오작동을 감지하기 위해 모델을 적용할 수 있다. 

검출 모델 파라미터를 추정하기 위해 실제 데이터 세트(섹션 4.1에 자세히 설명되어 있음)만 사용했다는 점을 언급해야 한다.

### *Proposed Fault Detection Method*

  고장을 감지하기 위해 다이나믹 모델을 사용하는 아이디어는 실제 시스템의 아웃풋, 순간적인 power p\_{dc,s}(k), s ∈ **S** , 모델의 아웃풋 \hat p_{dc,s}(k) 사이의 mismatching에 근거한다. 더 구체적으로, PV array에서, 모델은 시스템이 오작동 없이 작동하는 경우에만 시스템의 출력을 나타낸다. 일부 고장이 있는 경우 모델과 PV 공장은 서로 다른 다이내믹으로 작동합니다. 결과적으로 residue e_s(k) = p\_{dc,s}(k) - \hat p\_{dc,s}는 시간이 지날수록 증가할 것이다. 만약 signal *e*\_s(*k*)가 Adaptive Threshold 블록에 의해 설정된 한계보다 큰 진폭에 도달하면 발전소에 결함 f(k)가 있다고 결론을 내릴 수 있다. 그림 8은 이 프로세스의 일반적인 아이디어를 보여준다.

![Screen Shot 2021-07-06 at 12.58.23 PM](/Users/sua/Library/Application Support/typora-user-images/Screen Shot 2021-07-06 at 12.58.23 PM.png)

  이 연구에서, 기본 시스템의 dynamics를 다음과 같은 식으로 표현된 linear Auto-Regressive with eXogenous input (ARX) model에 의해 근사치를 구했다. 

![Screen Shot 2021-07-06 at 1.10.12 PM](/Users/sua/Library/Application Support/typora-user-images/Screen Shot 2021-07-06 at 1.10.12 PM.png)

또는 z transform을 사용하여 시스템의 transfer function을 구했다.

![Screen Shot 2021-07-06 at 1.11.12 PM](/Users/sua/Library/Application Support/typora-user-images/Screen Shot 2021-07-06 at 1.11.12 PM.png)

G(z) ∈  C는 Z irradiance의 Transform,  *g*(*k*), and *P*(*Z*) ∈ C는 output power \hat p\_{dc,s}(k)의 Z trainsform이고, 둘 다 주파수 영역에 있다. 파라미터의 벡터  *θ* = [*a*1(*k*) *a*2(*k*) *b*0(*k*) *b*1(*k*)]*T* ∈ R4는 Recursive Least Squares (RLS) algorithm를 사용하여 추정된다. (결함 또는 열화 프로세스 후) 시간이 지남에 따라 시스템이 동적으로 변할 수 있으므로 이러한 매개변수의 발전은 그림 9에서 볼 수 있다.

<img src="/Users/sua/Library/Application Support/typora-user-images/Screen Shot 2021-07-06 at 1.19.49 PM.png" alt="Screen Shot 2021-07-06 at 1.19.49 PM" style="zoom:50%;" />

  기본적인 태양광 발전 시스템에는 두 가지 string이 있다는 것을 언급할 가치가 있다. 따라서 각 string에서 고장을 감지하기 위해, Figure 8에서 볼 수 있는 두 모델이 있다(각 string당 하나). 추가적으로, 각 모델에서, 파라미터 *θ* = [*a*1(*k*) *a*2(*k*) *b*0(*k*) *b*1(*k*)]*T* 는 일단 시스템 오퍼레이션과 거의 유사하다. 그림 9 (빨간색 점선)에서 제시된 불연속부는 태양광 시스템의 가능한 결함을 나타냅니다.

<img src="/Users/sua/Library/Application Support/typora-user-images/Screen Shot 2021-07-06 at 1.43.51 PM.png" alt="Screen Shot 2021-07-06 at 1.43.51 PM" style="zoom:50%;" />  

Table 3은 PV 시스템과 기상대에서 수집된 실제 데이터를 사용하여 기본 시스템의 각 문자열에서 가능한 많은 입력 변수와 전력 출력 사이의 상관 관계를 보여준다. 이를 고려할 때 입력 변수, 방사선도(G) 및 PV 온도(T), String 1(P_dc,1)의 출력 전력과의 높은 상관관계를 확인할 수 있으며 String 2(P_dc,2)의 출력 전력도 마찬가지이다. 따라서 입력 변수에 대한 자연스러운 선택은 다음과 같다 : (i) irradiance (*T*); and, (ii) PV temperature (*T*) 그러나 단순성 때문에, 높은 상관관계(0.96) 때문에 방사선 조사 G만 입력 변수로 선택되었다. 

  더욱이, 선형 ARX 모델은 다음과 같은 이유 때문에 선택되었다 :

- ARX 선형 모델은 가장 단순한 동적 시스템 중 하나이다. 따라서, 컴퓨터 구현은 시간이 적게 소요되며, 이는 태양광 지역의 모니터링 시스템 구현에 이상적이다.
- ARX 모델은 섹션 7에서 자세히 설명한 실제 시스템에 대한 근접한 근사치를 나타낸다.

  제안된 모델이 유일한 모델이 아니라는 점을 언급하는 것이 중요하다. 이전 연구에서, 저자들은 이미 동일한 문제에 적용된 다이오드 모델과 Hammerstein-Wiener 모델을 조사하였다 [17]. 비교 내용은 섹션 7에 제시된다. 시스템과 모델 간의 불일치를 사용하여 고장을 감지하기 위해, 그림 8에서 볼 수 있듯이, 적응형 임계값이 사용되었다. 이 블록은 (3)에 표현된 재귀 평균과 (4)에 표현된 재귀 분산에 의해 수학적으로 구성되었으며, 둘 다 forgetting factor에 의해 변조된다.:

![Screen Shot 2021-07-06 at 1.53.34 PM](/Users/sua/Library/Application Support/typora-user-images/Screen Shot 2021-07-06 at 1.53.34 PM.png)

*e* ̄(*k*) ∈ R은 residues의 평균, k ∈ Z, λ ∈ [0,1], and σ2(k) ∈ R는 residues의 분산이다.  만약 residue의 절대값 |e(k)|이 임계값 *e* ̄(*k*) ± 루트 σ2(k)를 넘는 경우, 고장으로 간주된다. 

![Screen Shot 2021-07-06 at 1.56.05 PM](/Users/sua/Library/Application Support/typora-user-images/Screen Shot 2021-07-06 at 1.56.05 PM.png)

시간 경과에 따른 조작 결함의 진화를 나타내는 f(k)와 벤치마크 신호 b (k) ∈ B = {0,1} 사이의 평균 제곱 오차 (MSE)를 최소화하기 위해 ∆ 값의 선택은 경험적으로 수행되었다. 다시 말해, bf (k) = 0은 시스템에 결함이 없음을 정의하는 반면, bf (k) = 1은 조작된 고장이 발생하는 것을 나타낸다.

### *Detection Metrics*

고장 감지 프로세스를 통해 얻은 결과를 정량화하기 위해 이 작업에는 일부 metrics가 사용되었다. 그러나 이 프로세스의 성능 메트릭을 정의하기 전에 다음 개념을 정의하는 것이 중요합니다.

- TP (참 양극): 검출 프로세스가 태양광 시스템의 실제 고장을 가리킬 때 발생
- TN (참 음성): 태양광 시스템에 고장이 없을 때 발생하며, 고장 감지 시스템이 이를 확인
- FP(거짓의 양성): 태양광 시스템에 고장이 없고 고장 감지 시스템이 고장을 지적할 때 발생
- FN(거짓 음성): 태양광 시스템이 고장을 표시하고 감지 시스템이 고장을 신호하지 않을 때 발생

이를 기반으로 제안된 장애 감지 시스템에 대해 다음과 같은 성능 메트릭을 정의할 수 있다.

- Accuracy(A): 전체 검출 효율에 해당

<img src="/Users/sua/Library/Application Support/typora-user-images/Screen Shot 2021-07-06 at 2.04.46 PM.png" alt="Screen Shot 2021-07-06 at 2.04.46 PM" style="zoom:50%;" />

- Precision(P): 양의 지표 간 비율

<img src="/Users/sua/Library/Application Support/typora-user-images/Screen Shot 2021-07-06 at 2.05.15 PM.png" alt="Screen Shot 2021-07-06 at 2.05.15 PM" style="zoom:50%;" />

- Sensitivity(S): 올바른 감지 분류의 효율성을 평가

<img src="/Users/sua/Library/Application Support/typora-user-images/Screen Shot 2021-07-06 at 2.05.42 PM.png" alt="Screen Shot 2021-07-06 at 2.05.42 PM" style="zoom:50%;" />

- Specificity(E): 분류기가 잘못된 탐지를 얼마나 효율적으로 식별하는지 평가

<img src="/Users/sua/Library/Application Support/typora-user-images/Screen Shot 2021-07-06 at 2.06.05 PM.png" alt="Screen Shot 2021-07-06 at 2.06.05 PM" style="zoom:50%;" />



## Fault Classification

  주어진 시간(f (k) = 1)에 고장이 감지될 때마다 고장 분류 블록은 이상 작동의 가장 개연성이 높은 원인을 사용자에게 표시한다. 이 과제를 위해 가장 일반적으로 감독되는 4가지 기계 학습 방법의 정확성을 평가했다. 이러한 알고리즘의 입력으로 선택된 변수는 결함이 발생하는 PV 발전소의 DC 측의 동작을 설명하는 변수로서 feature vector를 형성한다.

![Screen Shot 2021-07-06 at 2.07.28 PM](/Users/sua/Library/Application Support/typora-user-images/Screen Shot 2021-07-06 at 2.07.28 PM.png)

  분류 시스템은 매핑 기능으로 표시될 수 있다 h : FV(k) -> Ψ, 
$$
Ψ = \{L_{short},L_{open},L_{degradation},L_{shadowing} \}
$$
Ψ은 고려된 4가지 결함의 그룹을 나타낸다. 고려되는 모든 방법은 h를 구성하기 위한 교육 절차를 사용한다. 각 방법과 교육 절차에 대한 간략한 설명은 다음 단락에 자세히 설명되어 있다. 

  첫 번째 시험 방법은 k-가장 가까운 이웃 (k-Nearest Nighbors)이었습니다. 이 방법에서는 PV 발전소의 현재 특성 벡터가 가장 유사한 특성 (유클리드 거리 측면에서 가장 가까운)을 제시하는 교육 세트에 연관되어있다. 이 방법은 구현이 매우 간단하지만 분류를 수행하기 위해 전체 교육 세트가 필요하다는 단점이 있다.

  이러한 이유로, 여전히 단순하지만 메모리 사용량이 적은 방법이 고려되었습니다. 의사 결정 트리[53]입니다. 이 방법에서는 각 클래스가 리프 노드에 포함되는 트리 구조가 형성된다. 분류를 위해 이 트리는 노드 간에 이동하며, 각 단계는 서로 다른 입력 기능에 기반한 이진 의사 결정에 따라 안내된다. 이점으로 분류 절차는 매우 간단하지만, 효율적이고 편견이 없는 의사결정 트리를 만드는 프로세스를 항상 사용할 수 있는 것은 아니다. 또한 클래스를 약간 변경하면 완전한 트리 재구축이 필요할 수 있으므로 보다 효율적인 분류 알고리즘을 검색할 동기를 부여한다.

  널리 사용되는 또 다른 분류 방법은 Support Vector Machines입니다. 이 방법은 각 특성 벡터가 점으로 표현되는 다차원 벡터 공간을 만드는 방식으로 작동한다. 

  이 연구에서, MLP network를 사용하는데, 하나의 hidden layer와 input layer, output layer가 있다. 

### *Training Procedure*

![Screen Shot 2021-07-06 at 3.37.53 PM](/Users/sua/Library/Application Support/typora-user-images/Screen Shot 2021-07-06 at 3.37.53 PM.png)

  고장 분류를 위한 교육 및 테스트 절차는 그림 10에 설명되어 있다. 첫째, 섹션 4.2에서 제시된 매개변수로 생성된 시뮬레이션 데이터로만 구성된 교육 데이터는 지도 기능을 생성하는 감독된 기계 학습 방법을 훈련하는 데 사용됩니다. 그런 다음 섹션 4.1에 나온 것처럼 실제 데이터 세트의 라벨 지정 지점에 적용됩니다. 그런 다음 매핑 기능에 의해 생성된 파티션이 실제 레이블 파티션과 비교되며, 이렇게 하면 시스템 정확도를 확인할 수 있다.

  교육 절차에서, 교차 검증이라고 불리는 기술이 분류 방법의 매개변수를 설정하기 위해 train data와 함께 사용되었다. 이 기술에서 교육 데이터 세트는 두 개의 그룹으로 분할되며, 첫 번째 데이터 세트는 교육에 사용되고 두 번째 데이터 세트는 분류 정확도 평가에 사용됩니다(섹션 6.2). 이 프로세스는 여러 번 반복될 수 있습니다. 각 파티션을 구성하는 데 서로 다른 데이터를 사용함으로써 교육/검증 그룹에 각 분류 라벨의 공정한 비율이 포함되도록 주의를 기울여야 합니다. 최종 결과는 모든 반복의 평균입니다.

  이 경우 80%의 데이터를 교육용으로 사용하여 시뮬레이션된 데이터셋을 파티셔닝하고, 다른 데이터를 사용하여 파티션을 구성함으로써 이 프로세스를 10회 반복했다. 이 교차 검증 프로세스는 방법 파라미터에 대해 다양한 값을 사용하여 실행되었으며, 테스트 중에서 정확도 평균이 가장 높은 값을 산출하는 값을 선택했다.

  k-Nearest Neighbors의 경우 교차 검증 애플리케이션에 대해 고려된 가장 가까운 인접 네트워크의 양인 매개 변수 k가 {2, 3, ..., 99, 100} 집합에서 변경했다. 의사결정 트리와 관련하여, 최대 리프 노드와 최대 깊이라는 두 개의 매개 변수가 평가되었습니다. 두 모수에 대해 변동 경계가 {2, 3, ..., 99, 100}이었습니다. Support Vector Machine의 경우, 가우스 커널[54]을 사용하여 최선의 결과를 얻었습니다. 가우스 커널은 교차 검증 프로세스에서 변경되어야 하는 두 가지 매개 변수 C({0.5, 1, 2, 5, 10, 15, 20, 25}에서 검색됨)를 포함하며 이는 모델 복잡성과 교육 데이터 적합도 사이의 균형을 담당합니다. 커널 매개 변수 ∆입니다({0.1, 0.5, 1, 2, 5, 10, 15, 20, 25} 참조). 초기에, ANN은 6개의 입력 장치, 4개의 출력 장치 및 단일 숨겨진 레이어로 구축되었으며, 그 크기는 사용되는 유일한 하이퍼 파라미터이다. 숨겨진 계층은 정류된 선형 단위를 활성화 함수로 사용하는 반면 출력 계층은 소프트맥스(정규화된 지수 함수)를 사용합니다. 또한, [55]에서 제시된 바와 같이, 사용된 최적화 해결사는 적응형 모멘트 추정, 즉 ADAM이었습니다. 교차 검증을 통해 숨겨진 계층 크기를 검색한 후 {5, 6, ..., 29, 30}개의 뉴런 간격으로 수행되었습니다.

## **Results and Discussion**

  이 섹션에서는 모든 결과를 제시하고 논의한다. 첫째, 개별 장애 감지 결과가 제시되어 재귀적 접근 방식을 비교하고 본 연구에서 제안된 가장 적절한 모델을 나타낸다. 순차적으로, 분류를 위한 시뮬레이션 데이터의 유효성 검사가 제시되어 분류 컨텍스트에서 시뮬레이션 데이터의 사용을 강조한다. 이후에는 다양한 기계 학습 모델에 대한 개별 장애 분류 결과가 제시된다. 그 다음에는 최상의 장애 감지 및 분류 모델의 조합이 제시되며, 이어서 최신 모델과의 비교가 뒤따릅니다. 마지막으로, 통합된 고장 감지 및 분류 기능이 있는 MS의 결과가 표시됩니다.

### Model Results

  본 섹션에서는 태양광 모델 및 적응 임계값을 기반으로 한 고장 감지 프로세스의 결과를 제공한다. 

<img src="/Users/sua/Library/Application Support/typora-user-images/Screen Shot 2021-07-06 at 4.00.36 PM.png" alt="Screen Shot 2021-07-06 at 4.00.36 PM" style="zoom:50%;" />

그림 11은 SDM(Single-Diode Model), DDM(Double-Diode Model), ARX 모델 및 Hammerstein의 성능을 그래픽으로 보여줍니다.실제 출력 시스템과 비교한 Wiener Model(HWM)입니다.

표 4는 가능한 여러 모델 간의 정량적 비교를 보여줍니다. 이 분석은 NRMSE(정규화된 루트 평균 제곱 오차)를 기반으로 합니다.

<img src="/Users/sua/Library/Application Support/typora-user-images/Screen Shot 2021-07-06 at 4.01.19 PM.png" alt="Screen Shot 2021-07-06 at 4.01.19 PM" style="zoom:50%;" />

이러한 특성과 모델 간의 성능 비교는 표 9에 요약되어 있습니다.

<img src="/Users/sua/Desktop/Screen Shot 2021-07-06 at 4.19.22 PM.png" alt="Screen Shot 2021-07-06 at 4.19.22 PM" style="zoom:50%;" />

표 9를 기반으로, ARX 모델 접근법이 분석된 모든 통계 속성에서 다른 세 가지 모델을 극복한다고 결론을 내릴 수 있습니다. ARX 모델이 제공하는 전반적인 정확도는 차상위 모델(DDM)보다 19.64% 더 높다는 점을 유념해야 합니다.

  ARX 모델의 고장 감지 성능이 향상된 이유는 다음과 같습니다. (i) 동적 모델입니다(정적 다이오드 모델과 비교할 경우 장점이 있음). (ii) ARX 모델은 동적이기 때문에 과도 및 안정 상태 모두에서 시스템 동작을 설명할 수 있습니다. (iii) ARX 모델 파라미터 추정은 RLS 알고리즘을 기반으로 합니다. RLS 알고리즘은 시간에 따라 변하는 시스템을 모델링하는 데 더 적합합니다



### *Fault Classification*

  이 단계에서 어떤 알고리즘이 가장 적합한지 판단하여 분류 방법에 대한 평가를 시작했습니다.

ANN은 우리 시스템에서 사용하도록 선택된 방법이며, 이 방법에 대한 혼란 매트릭스는 표 12에 제시되어 있습니다.

![Screen Shot 2021-07-06 at 4.30.29 PM](/Users/sua/Library/Application Support/typora-user-images/Screen Shot 2021-07-06 at 4.30.29 PM.png)



### Combination of Fault Detection and Classification

  제안된 고장 감지 방법을 이전 섹션에서 제시된 것과 같이, 최선의 분류기 (ANN)와 결합함으로써, 최종 혼란 매트릭스는 표 13에 제시됩니다.

![Screen Shot 2021-07-06 at 4.32.12 PM](/Users/sua/Library/Application Support/typora-user-images/Screen Shot 2021-07-06 at 4.32.12 PM.png)

이러한 결과를 얻기 위해 먼저 즉각적인 데이터가 고장 감지 모델에 적용되고, 감지된 각 장애에 대해 분류기가 해당 결함을 식별하는 데 사용됩니다. 혼돈 매트릭스에는 일반 클래스가 포함됩니다. 표 13의 평균 클래스 정확도는 92.64%입니다. 검출 (93.09%) 및 분류 (95.44%) 방법의 개별 정확도와 비교했을 때, 복합 접근법에 비해 결과가 열등하다는 것을 알 수 있습니다. 그러나 감지 단계에서 얻은 결과와 유사하며, 이는 감지된 고장 대부분이 높은 분류 정확도를 나타낸다는 것을 보여줍니다. 

## Conclusion

  고장 감지와 관련하여, PV 패널의 irradiance를 입력 신호로, power을 출력으로 사용하여 시스템의 결함을 감지하기 위한 재귀 선형 모델을 제안했다. 결함 감지의 정확도는 93.09%로 단일 및 이중 다이오드 등 문헌에 일반적으로 사용되는 다른 모델보다 상당히 높았습니다. 분류 측면에서, 서로 다른 기계 학습 기반 방법을 비교하였으며, ANN 모델에서 95.44%로 가장 높은 정확도를 보였습니다. 또한, 시뮬레이션 (및 검증된) 데이터가 기계 학습 모델을 교육하는 데 사용되었고, 이를 통해 다양한 장애 상태를 생성함으로써 모델의 일반화를 증가시켰다. 감지와 분류를 결합하여 전체 정확도는 92.64%였습니다. 다른 최첨단 방법은 비교 가능한 성능을 제공하고 내장형 PV 발전소 모니터링 시스템과 고장 감지 및 분류 접근방식의 통합을 제시하지 않기 때문에 이러한 결과는 관련성이 있는 것으로 강조될 수 있으며, 이를 통해 다양한 PV 고장, 실시간 및 과거 Mon의 온라인 식별 및 분류가 가능합니다.전기 및 환경 매개변수의 반복을 수행해야 합니다. 또한, 실제 데이터 세트를 공개함으로써 결함 감지 및 분류 방법을 비교하는 표준화 방법에 기여할 계획입니다. 

  본 연구의 순서에서, 저자들은 MPPT 결함 및 기타 종류의 단락 회로와 같이 시스템에서 발생할 수 있는 보다 일반적인 결함들을 추가하는 것 외에 다수의 동시 장애에 대한 분석을 포함하려고 합니다. 제안된 모델의 최종 검증으로, 시스템은 또한 다른 PV 발전소에 통합될 것이며, 일부는 더 높은 정격 전력을 가지고 있고 일부는 다른 환경 조건의 영향을 받는 다른 지리적 지역에 설치될 것입니다. 이를 통해 당사 시스템의 일반화 기능을 더욱 강화할 수 있습니다.

